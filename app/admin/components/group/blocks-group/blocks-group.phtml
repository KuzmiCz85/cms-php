<?php
  $blocks = isset($data->blocks) ? $data->blocks : null;
?>

<div class="g-blocks">
  <ul>
    <?php foreach ($blocks as $block) : ?>
      <li>
        <div class="block" data-id="<?= $block->id ?>">
          <?= $block->block ?> with fields:

          <?php foreach ($block->fields as $field) {
            $tempMn->include("field/field.phtml", '{
              "type": "' . $field->type . '",
              "name": "' . $field->name . '",
              "content": ' . json_encode(isset($block->data) && isset($block->data->{$field->name}) ? $block->data->{$field->name} : null) .'
            }');
          } ?>
        </div>
      </li>
    <?php endforeach ?>
  </ul>
</div>
